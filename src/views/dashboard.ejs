<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>nodehosting</title>

  <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
      integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
      integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css"
    />
    <link
      rel="stylesheet"
      href="/css/dashboard.css"
    />

    <script
      src="https://code.jquery.com/jquery-3.6.3.min.js"
      integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>
<body class="dark-mode" style="overflow-y: hidden;">
  <script>
    /** @param {string[]} messages */
    function message(messages) {
      const len = messages.length;
      messages = messages.join('\n');
      swal({
        title: `You have ${len > 1 ? `${len} messages` : `a message`}`,
        text: messages,
        icon: 'info',
        button: "I've read them all"
      });
    }
  </script>
  <div class="wrapper">
    <div class="content-wrapper">
      <% if(user.messages.length > 0) { %>
        <script data-messages="<%= JSON.stringify(user.messages) %>">
          const data = JSON.parse(document.currentScript.dataset.messages);
          console.log({data, type: typeof data});
          
          message(data);
        </script>
      <% } %>
      <div class="row-cols-1">
        <div class="col">
          <div class="card card-outline card-purple" style="margin-right: 251px; margin-top: 5px;">
            <div class="card-header">
              <h3 class="card-title">Docker id: <%- user.dockerid %></h3>
            </div>
            <div class="card-body justify-content-center">
              <% if (user.dockerid == '' && !user.verifying && !user.verified) { %>
                <form action="/upload" method="post" enctype="multipart/form-data">
                  <input name="zip" type="file" class="btn-file" />
                  <button type="submit" class="btn btn-success" style="position: absolute; right: 3%;">
                    Upload
                  </button>
                </form>
              <% } else if(user.verifying) { %>
                <h2>Files are awating verification</h2>
              <% } else { %>
                <span class="text-xl">Controls</span>
                <a href="/logs"><button class="btn btn-success position-absolute" style="right: 3%;">Logs</button></a>
                <% if(user.running) { %>
                  <a href="/shutdown"><button class="btn btn-danger position-absolute" style="right: 9%;">Stop</button></a>
                  <% } else { %>
                    <a href="/start"><button class="btn btn-success position-absolute" style="right: 9%;">Start</button></a>
                  <% } %>
                <a href="/delete"><button class="btn btn-danger position-absolute" style="right: 15%;">Delete</button></a>
              <% } %>
            </div>
            <% if(user.verifying) { %>
              <div class="overlay dark">
                <i class="fa-solid fa-2xl fa-rotate spin"></i>
              </div>
            <% } %>
          </div>
        </div>
      </div>
    </div>
  </div>
  
</body>
</html>